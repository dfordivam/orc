= javascript_include_tag 'checkin', 'visitor', 'common'
%div{:class=>"mid_bg_add_visitors text_add_6 padd25bt padd20tp-1", :cellspacing=>"2", :cellpadding=>"2", :border=>"0"}
  = form_for @checkin do |f|
    -if @visitor.id.nil?
      .visitors
        = fields_for @checkin.visitor do |visitor|
          %table{:class => "table-structure", :cellpadding=>"10", :cellspacing=>"10"}
            %tbody
              %tr
                %td{:colspan=>"4"}
                  .header_font
                    = f.label :new_chekin, 'New Check In Here' 
              %tr
                %td
                  = visitor.label :name, 'Name'
                %td
                  = visitor.text_field :name, :class => 'text_feld_area'  
                %td
                  = visitor.label :age, 'Age'
                %td
                  = visitor.number_field :age, :in => [1,110], :step => 1, :class => 'text_feld_area'
              %tr
                %td
                  = visitor.label :address, 'Address'
                %td
                  = visitor.text_field :address, :class => 'text_feld_area'
                %td
                  = visitor.label :gender, 'Gender'
                %td
                  = visitor.radio_button :gender , 0, :value=>"true" 
                  Male
                  = visitor.radio_button :gender , 1
                  Female
              %tr
                %td
                  = visitor.label :mobile_no, 'Mobile No.'
                %td
                  = visitor.text_field :mobile_no, :class => 'text_feld_area'
                %td
                  = visitor.label :visitor_type, 'Type'
                %td
                  = select :visitor, :visitor_type, @coll
              %tr
                %td
                  = visitor.label :dob, 'Date of Birth'
                %td
                  = visitor.text_field :dob, :class => 'text_feld_area'
                %td
                  = visitor.label :organisation, 'Organisation'
                %td
                  = visitor.text_field :organisation, :class => 'text_feld_area'
              %tr
                %td{:colspan =>4, :id => 'add_info_checkin'}
                  %b
                    %u Additional Info
                    = image_tag('add-Icon.png')
              %tr
                %td{:colspan => "4"}
                  %table{:class => "table-structure", :cellpadding=>"10", :cellspacing=>"10"}
                    %tbody{:id => 'additional_info_checkin',:style=>'display:none'}
                      = render :partial => "additional_info_checkin" 
              %tr
                %td{:colspan => "4",:align=>"center"}
                  - if @checkin.id.nil?
                    = submit_tag "Submit"
                  - else
                    = submit_tag "Update"
                  = link_to "Cancel",checkins_path
    -else
      %table{:class => "table-structure", :cellpadding=>"10", :cellspacing=>"20"}
        %tbody
          %tr
            %td{:colspan=>"4"}
              .header_font
                = f.label :visitor_checkin, 'Visitor Check In Here' 
            %td
              = f.label :visitor, 'ID', :hidden => true
              = f.text_field :visitor_id, :hidden => true, :readonly => true, :size => 1
          %tr
            %td
              = f.label :is_accom_req, 'Accomodation Required'
            %td
              = f.radio_button :is_accom_req , 0, :value=>"true" 
              No
              = f.radio_button :is_accom_req , 1
              Yes
            %td
              = f.label :meals_req, 'Meals Required'
            %td
              = check_box_tag :meals , 'breakfast'
              Breakfast
              = check_box_tag :meals , 'lunch'
              Lunch
              = check_box_tag :meals , 'dinner'
              Dinner
          %tr
            %td
              = f.label :is_sight_seeing_req, 'Sight-Seeing Required'
            %td
              = f.radio_button :is_sight_seeing_req , 0, :value=>"true" 
              No
              = f.radio_button :is_sight_seeing_req , 1
              Yes
            %td
              = f.label :remarks, 'Checkin Remarks'
            %td
              = f.text_field :remarks, :class => 'text_feld_area'
          %tr
            %td
              = f.label :no_of_days, 'No. of Days'
            %td
              = f.number_field :no_of_days, :class => 'text_feld_area' 
            %td
              = f.label :event, 'Event'
            %td
              = select :checkin, :event_id, @event_list.collect { |e| [e.name, e.id] }
          %tr
            %td
              = f.label :building, 'Building'
            %td
              = select :room, :building_id, @building_list.collect {|e| [e.name, e.id] }
            %td
              = f.label :room, 'Room'
            %td
              = select :checkin, :room_id, {:include_blank => true}  
          %tr
            %td{:colspan=>"4"}
              .rooms_result
                = f.label :is_active, 'Is Active?'
                = f.check_box :is_active, :checked => true 
          %tr
            %td{:colspan => "4",:align=>"center"}
              - if @checkin.id.nil?
                = submit_tag "Submit"
              - else
                = submit_tag "Update"
              = link_to "Cancel",checkins_path
